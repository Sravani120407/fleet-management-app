<!DOCTYPE html>
<html lang="en">
<head><!--head-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
        .navbar {
            background-color: #333;
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .navbar h2 {
            margin: 0;
        }
        .filters {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .sidebar {
            width: 300px;
            background: #fff;
            padding: 20px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            position: fixed;
            top: 60px;
            bottom: 0;
            overflow-y: auto;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
        }
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
        }
        button {
            padding: 10px;
            background-color: #28a745;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #218838;
        }
        .content {
            margin-left: 320px;
            padding: 20px;
        }
        .card {
            background: #fff;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .card img {
            max-width: 100%;
            height: auto;
        }
        .card-buttons {
            margin-top: 10px;
        }
        .card-buttons button {
            margin-right: 5px;
        }

    </style>
</head>
<body>
    <div class="navbar">
        <h2>Fleet Management Dashboard</h2>
        <div class="filters">
            <label for="categoryFilter">Category:</label>
            <select id="categoryFilter">
                <option value="all">All Categories</option>
                <option value="auto">Auto</option>
                <option value="Car">Car</option>
                <option value="Truck">Truck</option>
                <option value="Bus">Bus</option>
            <label for="availabilityFilter">Availability:</label>
            <select id="availabilityFilter">
                <option value="All">All Status</option>
                <option value="Available">Available</option>
                <option value="Unavailable">Unavailable</option>
                </select>
                </select>
                <button onclick="clearFilters()">Clear Filter</button>
        </div>
    </div>
    <div class="sidebar">
        <h3>Add New Fleet</h3>
        <form id="fleetform">
            <div class="form-group">
                <label for="regNo">Reg No of Vehicle:</label>
                <input type="text" id="regNo" name="regNo" required>
            </div>
            <div class="form-group">
                <label for="category">Category:</label>
                <select id="category" required>
                    <option value="">Select...</option>
                    <option value="Auto">Auto</option>
                    <option value="Car">Car</option>
                    <option value="Truck">Truck</option>
                    <option value="Bus">Bus</option>
                </select>
                </div>
                <div class="form-group">
                    <label for="driverName">Driver Name:</label>
                    <input type="text" id="driverName" name="driverName" required>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="isAvailable" name="isAvailable">
                        Is Available
                    </label>
                </div>
                <button type="submit">Add Fleet</button>         
        </form>
    </div>
    <script>
        let fleetData = [];
        document.getElementById('fleetform').addEventListener('submit', function(e) {
            e.preventDefault();
            const regNo = document.getElementById('regNo').value;
            const category = document.getElementById('category').value;
            const driverName = document.getElementById('driverName').value;
            const isAvailable = document.getElementById('isAvailable').checked;
            if(!regNo || !category || !driverName) {
                alert('Please fill all required fields.');
                return;
            }
            fleetData.push({regNo, category, driverName, isAvailable});
            document.getElementById('fleetform').reset();
            document.getElementById('isAvailable').checked = true;
            renderFleetCards();
        });
        function renderFleetCards() {
            const container= document.getElementById('fleetCards');
            const categoryFilter = document.getElementById('categoryFilter').value;
            const availabilityFilter = document.getElementById('availabilityFilter').value;
            let filteredData = fleetData;
            if (categoryFilter !== 'All') {
                filteredData = filteredData.filter(f => f.category === categoryFilter);
            }
            if(availabilityFilter !=='All') {
                const isAvailable = availabilityFilter === 'Available';
                filteredData = filteredData.filter(f => f.isAvailable === isAvailable);
            }
            container.innerHTML = '';
            filteredData.forEach((fleet, index) => {
                const actualIndex =fleetData.indexOf(fleet);
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <img src="https://coding-platform.s3.amazonaws.com/dev/lms/tickets/5e80fcb6-3f8e-480c-945b-30a5359eb40e/JNmYjkVr3WOjsrbu.png" alt="Vehicle Image">
                    <h4>Reg No: ${fleet.regNo}</h4>
                    <p>Category: ${fleet.category}</p>
                    <p>Driver: ${fleet.driverName}</p>
                    <p>Status: ${fleet.isAvailable ? 'Available' : 'Unavailable'}</p>
                    <div class="card-buttons">
                        <button onclick="updateDriver(${actualIndex})">Update Driver</button>
                        <button onclick="toggleAvailability(${actualIndex})">Change Availability</button>
                        <button onclick="deleteVehicle(${actualIndex})">Delete Vehicle</button>
                    </div>
                    `;
                container.appendChild(card);
            });
        }
        function updateDriver(index) {
            const newDriver = prompt('Enter new driver name:');
            if (newDriver&& newDriver.trim() !== '') {
                fleetData[index].driverName = newDriver;
                renderFleetCards();
            }else if (newDriver !== null && newDriver){
                alert('Driver name cannot be empty.');
            }
        }
        function toggleAvailability(index) {
            fleetData[index].isAvailable = !fleetData[index].isAvailable;
            renderFleetCards();
        }
        function deleteVehicle(index) {
            if (confirm('Are you sure you want to delete this vehicle?')) {
                fleetData.splice(index, 1);
                renderFleetCards();
            }
        }
        function clearFilters() {
            document.getElementById('categoryFilter').value = 'All';
            document.getElementById('availabilityFilter').value = 'All';
            renderFleetCards();
        }
        document.getelementById('categoryFilter').addEventListener('change', renderFleetCards);
        document.getelementById('availabilityFilter').addEventListener('change', renderFleetCards);
    </script>
</body>
</html>